<!DOCTYPE HTML>
<html>

<head>
    <!--<script src="../node_modules/jquery/dist/jquery.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="js/test.js"></script>
</head>

<body>
    <style>
        .tab {
            position: absolute;
            left: 10em;
        }
    </style>
    <script>
        var idnumber = 0;
        //todolistelement prototype
        function pTolistElement(name, type, status, time) {
            this.taskname = name;
            this.tasktype = type;
            this.taskstatus = status;
            this.finishtime = time;

            this.output = function () {
                console.log(this.taskname + this.tasktype + this.taskstatus);
                return this.taskname + "&nbsp &nbsp &nbsp" + this.tasktype + "&nbsp &nbsp &nbsp" + this.finishtime;
            }
        }
        //initial finished element array
        var aFinishtask = new Array;

        //enter key function for input data
        function fEnterkey(event) {
            var x = event.key;
            if (x == "Enter" && $("#input_list").val() != "") {
                $(document).ready(function () {
                    var idstring = "li" + idnumber;// generate new id
                    $("#to_do_list").append("<li id=" + idstring + ">" + $("#input_list").val() + "</li>");
                    var name = $('#input_list').val();
                    //clear the input text
                    $("#input_list").val("");

                    //delete function
                    document.getElementById(idstring).onclick = function () {
                        //save the finished element in the finisharray
                        aFinishtask.push(new pTolistElement(name, "normal", "finish", new Date().toDateString()));
                        console.log("test click");// click test function
                        $("#" + idstring).remove();

                        //refresh the finished task lists
                        var length_finishtasks = aFinishtask.length;
                        var text = "<ol>";
                        text += "<p><b>Name &nbsp &nbsp Type  &nbsp &nbsp &nbsp  Finish Time </b> </p>";
                        for (var i = 0; i < length_finishtasks; i++) {
                            text += "<li> &nbsp " + aFinishtask[i].output() + "</li>";
                        }
                        text += "</ol>";
                        document.getElementById("finish_tasks").innerHTML = text;
                    }
                    idnumber++;
                })
            }
            else if($("#input_list").val() == "" && x == "Enter" ) 
            {
                alert("please enter the valid tasks name\n task name can not be empty");
                return;
            }
        }

        //show the task element
        $(document).ready(function () {
            //push task in the list bottom
            $("#bAdd").click(function () {
                if($("#input_list").val() == "") 
            {
                alert("please enter the valid tasks name\n task name can not be empty");
                return;
            }
                var idstring = "li" + idnumber;// generate new id
                $("#to_do_list").append("<li id=" + idstring + ">" + $("#input_list").val() + "</li>");
                var name = $('#input_list').val();
                $("#input_list").val("");

                //delete function
                document.getElementById(idstring).onclick = function () {
                    //save the finished element in the finisharray
                    aFinishtask.push(new pTolistElement(name, "normal", "finish", new Date().toDateString()));
                    console.log("test click");// click test function
                    $("#" + idstring).remove();
                    //refresh the finished task lists
                    var length_finishtasks = aFinishtask.length;
                    var text = "<ol>";
                    text += "<p><b>Name &nbsp &nbsp Type  &nbsp &nbsp &nbsp  Finish Time </b> </p>";
                    for (var i = 0; i < length_finishtasks; i++) {
                        text += "<li> &nbsp " + aFinishtask[i].output() + "</li>";
                    }
                    text += "</ol>";
                    document.getElementById("finish_tasks").innerHTML = text;
                }
                idnumber++;
            })
            //add from the top
            $("#bAdd_top").click(function () {
                if($("#input_list").val() == "") 
            {
                alert("please enter the valid tasks name \n task name can not be empty");
                return;
            }
                var idstring = "li" + idnumber;// generate new id
                var inputtext = document.createElement("li");
                inputtext.id = idstring;
                inputtext.innerHTML = $("#input_list").val();
                var name = $('#input_list').val();
                $("#to_do_list").prepend(inputtext);
                $("#input_list").val("");


                document.getElementById(idstring).onclick = function () {
                    aFinishtask.push(new pTolistElement(name, "important", "finish", new Date().toDateString()));
                    $("#" + idstring).remove();
                    //refresh the finished task lists
                    var length_finishtasks = aFinishtask.length;
                    var text = "<ol>";
                    text += "<p><b>Name &nbsp &nbsp Type  &nbsp &nbsp &nbsp  Finish Time </b> </p>";
                    for (var i = 0; i < length_finishtasks; i++) {
                        text += "<li> &nbsp " + aFinishtask[i].output() + "</li>";
                    }
                    text += "</ol>";
                    document.getElementById("finish_tasks").innerHTML = text;
                }
                idnumber++;
            })

            $("#bShowfinish").click(function () {
                var length_finishtasks = aFinishtask.length;
                var text = "<ol>";
                text += "<p><b>Name &nbsp &nbsp Type  &nbsp &nbsp &nbsp  Finish Time </b> </p>";
                for (var i = 0; i < length_finishtasks; i++) {
                    text += "<li> &nbsp " + aFinishtask[i].output() + "</li>";
                }
                text += "</ol>";
                document.getElementById("finish_tasks").innerHTML = text;
            })
        });

    </script>

    <p>Enter tasks:
        <input type="input_text" onkeydown="fEnterkey(event)" id="input_list" value="" size="10">
    </p>
    <button id="bAdd">Add task</button>
    <button id="bAdd_top">Important task</button>
    <p>
        <button id="bShowfinish"> Show finish tasks</button>
    </p>

    <h2>
        <b> To do list </b>
    </h2>
    <ul id="to_do_list">
    </ul>


    <p>
        <b>Finished Tasks Lists</b>
        <p id="finish_tasks"></p>
    </p>


</body>

</html>
