<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utef-8">
    <title>Web developing learing</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Last complied and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Popper js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>

    <!-- compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>

    <!-- mobile adjustement -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <script>
        var sCloseiconbutton = "<button id=\"sClose\" type=\"button\" class=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>";

        $(document).ready(function () {
            if (localStorage.getItem("idnumber") == null) {
                var idnumber = 0;
            }
            else var idnumber = localStorage.getItem("idnumber");

            //save the first localstorage for the finishedlist
            if (localStorage.getItem("finishedlist") == " ") {
                var aFinishtask = new Array;
            }
            else {
                aFinishtask = JSON.parse(localStorage.getItem("finishedlist"));
            }

            //output from the saved to do list
            if (localStorage.length != 0) {
                var length;
                if (localStorage.getItem("finishedlist") == null) length = localStorage.length - 1;
                else length = localStorage.length - 2;

                for (var i = 0; i < length; i++) {
                    var listID = "li" + i;
                    $("#to_do_list").append("<li class=\"list-group-item\" id=" + listID + ">" + localStorage.getItem(listID) + sCloseiconbutton + "</li>");
                }
            }

            //output from the finished 
            if (aFinishtask != null) {
                for (var i = 0; i < aFinishtask.length; i++) {
                    if (aFinishtask.length == 0) break;
                    $("#finish_tasks").append("<li class=\"list-group-item\">" + aFinishtask[i].slice(0, -1) + "</li>");
                }
            }
            else if (aFinishtask == null) {
                aFinishtask = new Array;
            }

            //todolistelement prototype
            function pTolistElement(name, type, status, time) {
                this.taskname = name;
                this.tasktype = type;
                this.taskstatus = status;
                this.finishtime = time;
            }

            $("#input_list").keypress(function (event) {
                if (event.which == 13 && $("#input_list").val()) {
                    var IDlistelement = "li" + idnumber;

                    //add delete button

                    $("#to_do_list").append("<li class=\"list-group-item\" id=" + IDlistelement + ">" + $("#input_list").val() + sCloseiconbutton + "</li>");

                    //save data to the localstorage
                    localStorage.setItem(IDlistelement, $("#input_list").val());
                    $("#input_list").val("");

                    //test idnumber
                    console.log(idnumber);
                    idnumber++;
                    localStorage.setItem("idnumber", JSON.stringify(idnumber));
                }
            })

            $("#to_do_list").on("click", "li", function (event) {
                event.preventDefault();
                //test for eventlistener and get the li id
                console.log($(this).attr("id"))
                var IDfinish = $(this).attr("id");

                //tests function
                console.log($(this).text());
                console.log(aFinishtask);

                aFinishtask.push($(this).text());
                $("#finish_tasks").append("<li class=\"list-group-item\">" + $(this).text().slice(0, -1) + "</li>");

                localStorage.removeItem(IDfinish);
                $("#" + IDfinish).remove();
                localStorage.setItem("finishedlist", JSON.stringify(aFinishtask));
            })

            $("#b_Add").click(function () {
                if ($("#input_list").val()) {
                    var IDlistelement = "li" + idnumber;
                    $("#to_do_list").append("<li class=\"list-group-item\" id=" + IDlistelement + ">" + $("#input_list").val() + "</li>");
                    //save data to the localstorage
                    localStorage.setItem(IDlistelement, $("#input_list").val());
                    $("#input_list").val("");

                    //test idnumber
                    console.log(idnumber);
                    idnumber++;
                    localStorage.setItem("idnumber", JSON.stringify(idnumber));
                }
            })

            $("#bClear").click(function () {
                localStorage.clear();
                location.reload();
            })

            $("#button_finish").click(function(){
                localStorage.setItem("finishedlist",null);
                location.reload();
            })
        })
    </script>

    <div class="container">
        <!-- Toggleable Dynamic Tabs -->
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#home"> Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#to_do_list_tab"> To do list</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#finish_list_tab">Finish list</a>
            </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div id="home" class="container tab-pane active">
                <br>
                <h3>HOME</h3>
                <p> The purpose of this website is designed for learning front-end developing skills.</p>
            </div>

            <!-- to do list -->
            <div id="to_do_list_tab" class="container tab-pane fade">
                <br>
                <h3>To do list
                    <font size="3"> &nbsp
                        <button id="bClear" size="5" type="button" class="btn btn-outline-primary">
                            <span style="cursor:pointer">Clear List</span>
                        </button>
                    </font>
                </h3>
                <div class="form-group">
                    <div class="col">
                        <div class="input-group" style="width:auto;">
                            <span class="input-group-btn" style="width:auto;">
                                <button class="btn btn-outline-primary" type="button" id="b_Add">
                                    <span style="cursor:pointer"> Add tasks</span>
                                </button>
                            </span>
                            <input id="input_list" value="" type="input_text" class="form-control" placeholder="e.g. homeworks" aria-label="e.g. homworks">
                          <!--  <input type="input_text_content" class="form-control" placeholder="tasks information"> -->
                        </div>
                    </div>
                </div>

                <div class="card" style="width:auto;">
                    <label class="form-check-label">
                        <ul class="list-group list-group-flush" id="to_do_list">
                        </ul>
                    </label>
                </div>

            </div>

            <!-- finished list -->
            <div id="finish_list_tab" class="container tab-pane fade">
                <br>
                <div class="card" style="width:auto;">
                    <div class="card-block">
                        <br>
                        <h4 class="card-title"> &nbsp Finished Tasks Lists</h4>
                    </div>
                    <ul class="list-group list-group-flush" id="finish_tasks"></ul>
                    <div class="card-block">
                        <a id="button_finish" href="#" class="card-link"> &nbsp &nbsp Clear Finished Tasks</a>
                    </div>
                </div>
                </p>
            </div>
        </div>

    </div>
</body>

</html>